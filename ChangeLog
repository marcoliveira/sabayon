2005-02-02  Mark McLoughlin  <mark@skynet.ie>

	* lib/storage.py: test adding a new file after
	installing.

2005-02-02  Mark McLoughlin  <mark@skynet.ie>

	* README: add bit about bug #154779
	
	* lib/storage.py:
	(print_exception): remove, unused.
	(ProfileStorage.__init__): add directory to constructor.
	Doesn't make sense for it to default to the home directory.
	(ProfileStorage.__get_metadata_description): accessor
	for description.
	(ProfileStorage.__get_file_info): build the tuple to be
	returned from update_all(), info_all() and install()
	(ProfileStorage.__get_asb_filename): rename to
	__get_abs_filename()
	(ProfileStorage.update_all): allow for a file that was
	added after installation.
	(run_unit_tests): re-work so we don't use the home dir,
	not spew debugging, test things a bit more and crap out
	if something fails
	
	* lib/README.storage: update.
	
	* lib/sources/filessource.py: lots of fixing, commiting 
	and applying work now.
	
	* lib/sources/gconfsource.py: update for ProfileStorage
	changes.
	
	* lib/userprofile.py:
	(UserProfile.__init__): update for storage changes.
	(UserProfile.sync_changes): sync storage to disk.
	
	* lib/util.py:
	(set_home_dir_for_unit_tests): add to make writing
	unit tests easier.

2005-02-02  Mark McLoughlin  <mark@skynet.ie>

	* lib/unittests.py: over-engineer the test harness
	to make it easier to selectively run certain tests
	i.e. "./unittests.py util storage filessource" just
	runs those tests.

2005-02-01  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py: launch the admin tool an
	arbtrary 5 seconds after starting the session.
	
	* lib/userprofile.py: allow the delegate not to
	emit any changes of its own.

2005-02-01  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py: open the dummy X connection
	on the right display.

2005-01-31  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py: open and hold open an X
	connection so Xnest doesn't re-init as xsetroot
	and xrdb connect and disconnect.

2005-01-31  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py:
	Explicitly write the protouser's xauth file since
	we need to change the display number.
	Use execve instead of changing os.environ.
	Add debugging spew.

2005-01-31  Mark McLoughlin  <mark@skynet.ie>

	* lib/dirmonitor.py: disconnect from gamin when
	stopping the monitor.

2005-01-31  Mark McLoughlin  <mark@skynet.ie>

	* lib/dirmonitor.py: remove all watches when
	stopping monitoring.

2005-01-31  Mark McLoughlin  <mark@skynet.ie>

	* lib/dirmonitor.py: fixup some bugs, passes unit
	tests again.

2005-01-29  Raphael Higino  <raphaelh@cvs.gnome.org>

	* configure.ac: Added pt_BR to ALL_LINGUAS.

2005-01-28  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py: copy the xauth file for the user
	before starting the session.

2005-01-28  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py: add code to write out an xauth
	file for Xnest.

Fri Jan 28 11:20:03 CET 2005 Daniel Veillard <veillard@redhat.com>

	* README lib/dirmonitor.py: switching to using gamin directly
	  for the directory watches.

2005-01-27  Mark McLoughlin  <mark@skynet.ie>

	* lib/protosession.py: checkpoint of the session
	launching code.

2005-01-27  Mark McLoughlin  <mark@skynet.ie>

	* lib/util.py: hmm, use GeneralError again.

2005-01-26  Mark McLoughlin  <mark@skynet.ie>

	* lib/util.py: pull username and homedir from
	the passwd database if available.

2005-01-25  Adam Weinberger  <adamw@gnome.org>

	* configure.ac: Added en_CA to ALL_LINGUAS.

2005-01-25  Mark McLoughlin  <mark@skynet.ie>

	* lib/userprofile.py: introduce the concept of a
	"delegate" - a helper class to give a higher level
	interpretation of some changes from a given source.
	
	* lib/sources/paneldelegate.py: an implementation
	of the helper class for the panel's config - so, e.g.,
	when you added an applet you get "applet added" rather
	than a whole bunch of GConf keys changed.
	
	* lib/sources/Makefile.am: add paneldelegate.py.
	
	* lib/sources/filessource.py,
	  lib/sources/gconfsource.py,
	  lib/sources/mozillasource.py: update.
	
	* lib/unittests.py,
	  lib/sources/testsource.py: hook up some more unit
	tests.
	
2005-01-24  Mark McLoughlin  <mark@skynet.ie>

	* lib/storage-modules/: rename to lib/sources -
	these modules are ProfileSource sub-classes, nothing
	to do with the ProfileStorage class - to avoid
	confusion.

	* configure.ac, lib/Makefile.am, lib/config.py.in
	  lib/unittests.py, lib/userprofile.py: update.

2005-01-24  Christian Rose  <menthos@menthos.com>

	* configure.ac: Added "sv" to ALL_LINGUAS.

Fri Jan 21 13:45:19 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/dirmonitor.py: do not explode when launched on a real user
	  environment.

Fri Jan 21 12:00:42 CET 2005 Daniel Veillard <veillard@redhat.com>

	* README: small update
	* lib/dirmonitor.py: try to fix problem with older gnome-vfs bindings

2005-01-21  Mark McLoughlin  <mark@skynet.ie>

	* lib/userprofile.py: last few bits of the grand re-naming.
	
	* lib/storage-modules/mozillasource.py: disable for now.

Thu Jan 20 21:44:31 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/dirmonitor.py: try to work around a portability problem
	  about gnome-vfs python module name
	* lib/util.py: added a routine print_exception() to display an exception

2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* lib/modules/gconfprofile.py: import errno module.

2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* admin-tool/monitorwindow.py: fix buglet.

2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* admin-tool/Makefile.am: install glade file
	in $pkgdatadir/glade, generate user-profile-admin.
	
	* admin-tool/user-profile-admin: remove.
	
	* admin-tool/user-profile-admin.in: add - generated
	now with correct prefix.
	
	* lib/Makefile.am: add some missing files, generate
	config.py.
	
	* lib/config.py: remove
	
	* lib/config.py.in: add - generates config.py.
	
	* lib/modules/Makefile.am: add filesprofile.py

Thu Jan 20 15:30:04 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/README.package lib/package.py: added a get_directory() entry point
	* admin-tool/monitorwindow.py admin-tool/user-profile-admin.py:
	  moving profile file intialization down to UserProfile() init
	* lib/userprofile.py lib/modules/filesprofile.py 
	  lib/modules/gconfprofile.py lib/modules/testmodule.py: adding the
	  self.profile_storage coming from the storage module, replacing
	  bascially self.profile_path by self.profile_storage.get_directory().
	  The modules creation routines now take a storage object argument
	  instead of a storage path.
	  
2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* admin-tool/monitorwindow.py: add a mandatory toggle,
	stop using magic numbers for column indices.

Thu Jan 20 13:32:28 CET 2005 Daniel Veillard <veillard@redhat.com>

	* admin-tool/user-profile-admin.py: use the package module instead of
	  tar files for the profile storage. Loading only ATM.

2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* admin-tool/monitorwindow.py:
	(ProfileChangesModel.handle_profile_change):
	remove existing changes to the same item from the model
	before prepending the new one.
	(ProfileMonitorWindow): hook up the menu items.
	
	* admin-tool/user-profile-admin.glade: add a "Commit"
	menu item.

2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* lib/modules/filesprofile.py: add "files" backend
	
	* lib/dirmonitor.py: remove the timeout when we've
	completed our tests so we don't screw over other
	tests.
	
	* lib/modules/gconfprofile.py: user util.get_home_dir()
	and util.get_user_name ()
	
	* lib/unittests.py: hook up more tests.

Thu Jan 20 11:28:50 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/package.py: GPL header
	* lib/config.py admin-tool/user-profile-admin: trying to get paths
	  to work automatically from CVS checkout too

Thu Jan 20 10:42:03 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/package.py: reuse util functions

2005-01-20  Mark McLoughlin  <markmc@redhat.com>

	* lib/util.py: add get_home_dir() and get_user_name()
	utility functions.

2005-01-19  Mark McLoughlin  <markmc@redhat.com>

	* lib/dirmonitor.py: add a recursive directory monitor
	thingy.

Wed Jan 19 11:36:57 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/README.package: quick doc for the package module

Wed Jan 19 11:15:04 CET 2005 Daniel Veillard <veillard@redhat.com>

	* lib/Makefile.am lib/package.py: integrated the package lib in the
	  tree

